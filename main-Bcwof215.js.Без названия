const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/run-user-code-DoUMXZup.js","assets/types-CFZwLKnY.js","assets/create-async-iterator-ggfG9U7o.js","assets/apply-csp-BqompKV2.js","assets/build-user-code-CF8dW8FY.js","assets/get-html-D9pLuxCy.js","assets/run-widget-code-C1wkUgZl.js","assets/run-html-BlpoQUER.js","assets/index-C3jYjnPP.js","assets/set-additional-globals-DW3EOb1N.js","assets/validate-react-W6PDThY6.js","assets/transpile-CEcpVUA2.js","assets/parse-transpile-error-BOpPOwyE.js"])))=>i.map(i=>d[i]);
var te=Object.defineProperty;var ee=(t,e,n)=>e in t?te(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var _=(t,e,n)=>ee(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();const ne="modulepreload",re=function(t){return"/"+t},Pt={},G=function(e,n,o){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),c=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));r=Promise.allSettled(n.map(i=>{if(i=re(i),i in Pt)return;Pt[i]=!0;const d=i.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${u}`))return;const l=document.createElement("link");if(l.rel=d?"stylesheet":ne,d||(l.as="script"),l.crossOrigin="",l.href=i,c&&l.setAttribute("nonce",c),document.head.appendChild(l),d)return new Promise((p,b)=>{l.addEventListener("load",p),l.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${i}`)))})}))}function s(a){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=a,window.dispatchEvent(c),!c.defaultPrevented)throw a}return r.then(a=>{for(const c of a||[])c.status==="rejected"&&s(c.reason);return e().catch(s)})},vt="root",rt=()=>document.getElementById(vt),oe=()=>{const t=rt();t==null||t.remove()},Pn=()=>{const t=document.createElement("iframe");return t.id=vt,document.body.appendChild(t),t};let wt=!1;const se=()=>wt,Mn=({doc:t})=>{var n,o;const e=r=>{r.isTrusted&&(wt=!0,setTimeout(()=>{wt=!1}))};(n=t.contentWindow)==null||n.addEventListener("click",e,{capture:!0,passive:!0}),(o=t.contentWindow)==null||o.addEventListener("keydown",e,{capture:!0,passive:!0})};let Et=null;const ae=new Set(["requestDisplayMode","callCompletion","streamCompletion","callTool","sendFollowUpMessage"]),ce=t=>{Et=t},X=()=>{if(!Et)throw new Error("Host API not published");return new Proxy(Et,{get(t,e){return ae.has(e)&&!se()&&console.warn(`Method ${String(e)} called without synchronous user event`),e in t?t[e]:()=>{console.warn(`Host API method ${String(e)} not found`)}}})};function ie(t,e="<unknown>"){if(t==null)throw new Error(`${e}: unexpected nullish value: ${JSON.stringify(t)}`);return t}var h=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function zn(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Tt={},ct={},it={};Object.defineProperty(it,"__esModule",{value:!0});it.cast=de;it.get=le;it.set=fe;const ue=2**32;function de(t){return t<0?t+ue:t}function le(t,e){return t>>e&255}function fe(t,e,n){return t^(t^n<<e)&255<<e}(function(t){var e=h&&h.__createBinding||(Object.create?function(f,y,A,C){C===void 0&&(C=A);var z=Object.getOwnPropertyDescriptor(y,A);(!z||("get"in z?!y.__esModule:z.writable||z.configurable))&&(z={enumerable:!0,get:function(){return y[A]}}),Object.defineProperty(f,C,z)}:function(f,y,A,C){C===void 0&&(C=A),f[C]=y[A]}),n=h&&h.__setModuleDefault||(Object.create?function(f,y){Object.defineProperty(f,"default",{enumerable:!0,value:y})}:function(f,y){f.default=y}),o=h&&h.__importStar||function(f){if(f&&f.__esModule)return f;var y={};if(f!=null)for(var A in f)A!=="default"&&Object.prototype.hasOwnProperty.call(f,A)&&e(y,f,A);return n(y,f),y};Object.defineProperty(t,"__esModule",{value:!0}),t.OFFSET_A=t.OFFSET_B=t.OFFSET_G=t.OFFSET_R=void 0,t.newColor=i,t.from=d,t.toNumber=u,t.getRed=l,t.getGreen=p,t.getBlue=b,t.getAlpha=O,t.setRed=R,t.setGreen=S,t.setBlue=x,t.setAlpha=Y;const r=o(it),{cast:s,get:a,set:c}=r;t.OFFSET_R=24,t.OFFSET_G=16,t.OFFSET_B=8,t.OFFSET_A=0;function i(f,y,A,C){return(f<<t.OFFSET_R)+(y<<t.OFFSET_G)+(A<<t.OFFSET_B)+(C<<t.OFFSET_A)}function d(f){return i(a(f,t.OFFSET_R),a(f,t.OFFSET_G),a(f,t.OFFSET_B),a(f,t.OFFSET_A))}function u(f){return s(f)}function l(f){return a(f,t.OFFSET_R)}function p(f){return a(f,t.OFFSET_G)}function b(f){return a(f,t.OFFSET_B)}function O(f){return a(f,t.OFFSET_A)}function R(f,y){return c(f,t.OFFSET_R,y)}function S(f,y){return c(f,t.OFFSET_G,y)}function x(f,y){return c(f,t.OFFSET_B,y)}function Y(f,y){return c(f,t.OFFSET_A,y)}})(ct);var ut={},g={};Object.defineProperty(g,"__esModule",{value:!0});g.labToXyzd50=Oe;g.xyzd50ToLab=Re;g.oklabToXyzd65=Nt;g.xyzd65ToOklab=$t;g.lchToLab=Vt;g.labToLch=Ut;g.displayP3ToXyzd50=Se;g.xyzd50ToDisplayP3=Ae;g.proPhotoToXyzd50=Ce;g.xyzd50ToProPhoto=Pe;g.adobeRGBToXyzd50=Me;g.xyzd50ToAdobeRGB=ze;g.rec2020ToXyzd50=Le;g.xyzd50ToRec2020=Be;g.xyzd50ToD65=Ht;g.xyzd65ToD50=Wt;g.xyzd65TosRGBLinear=Ie;g.xyzd50TosRGBLinear=De;g.srgbLinearToXyzd50=Fe;g.srgbToXyzd50=xe;g.xyzd50ToSrgb=ve;g.oklchToXyzd50=Ge;g.xyzd50ToOklch=je;const Gt=.9642,jt=1,Xt=.8251;function T(t,e){const n=[0,0,0];for(let o=0;o<3;++o)n[o]=t[o][0]*e[0]+t[o][1]*e[1]+t[o][2]*e[2];return n}class N{constructor(e,n,o=0,r=0,s=0,a=0,c=0){_(this,"g");_(this,"a");_(this,"b");_(this,"c");_(this,"d");_(this,"e");_(this,"f");this.g=e,this.a=n,this.b=o,this.c=r,this.d=s,this.e=a,this.f=c}eval(e){const n=e<0?-1:1,o=e*n;return o<this.d?n*(this.c*o+this.f):n*(Math.pow(this.a*o+this.b,this.g)+this.e)}}const I={sRGB:new N(2.4,1/1.055,.055/1.055,1/12.92,.04045,0,0),sRGB_INVERSE:new N(.416667,1.13728,-0,12.92,.0031308,-.0549698,-0),proPhotoRGB:new N(1.8,1),proPhotoRGB_INVERSE:new N(.555556,1,-0,0,0,0,0),k2Dot2:new N(2.2,1),k2Dot2_INVERSE:new N(.454545,1),rec2020:new N(2.22222,.909672,.0903276,.222222,.0812429,0,0),rec2020_INVERSE:new N(.45,1.23439,-0,4.5,.018054,-.0993195,-0)},D={sRGB:[[.436065674,.385147095,.143066406],[.222488403,.716873169,.06060791],[.013916016,.097076416,.714096069]],sRGB_INVERSE:[[3.134112151374599,-1.6173924597114966,-.4906334036481285],[-.9787872938826594,1.9162795854799963,.0334547139520088],[.07198304248352326,-.2289858493321844,1.4053851325241447]],displayP3:[[.515102,.291965,.157153],[.241182,.692236,.0665819],[-.00104941,.0418818,.784378]],displayP3_INVERSE:[[2.404045155982687,-.9898986932663839,-.3976317191366333],[-.8422283799266768,1.7988505115115485,.016048170293157416],[.04818705979712955,-.09737385156228891,1.2735066448052303]],adobeRGB:[[.60974,.20528,.14919],[.31111,.62567,.06322],[.01947,.06087,.74457]],adobeRGB_INVERSE:[[1.9625385510109137,-.6106892546501431,-.3413827467482388],[-.9787580455521,1.9161624707082339,.03341676594241408],[.028696263137883395,-.1406807819331586,1.349252109991369]],rec2020:[[.673459,.165661,.1251],[.279033,.675338,.0456288],[-.00193139,.0299794,.797162]],rec2020_INVERSE:[[1.647275201661012,-.3936024771460771,-.23598028884792507],[-.6826176165196962,1.647617775014935,.01281626807852422],[.029662725298529837,-.06291668721366285,1.2533964313435522]],xyz:[[1,0,0],[0,1,0],[0,0,1]]};function Mt(t){return t*(Math.PI/180)}function pe(t){return t*(180/Math.PI)}function F(t,e,n,o){return[t.eval(e),t.eval(n),t.eval(o)]}const he=[[.9999999984505198,.39633779217376786,.2158037580607588],[1.0000000088817609,-.10556134232365635,-.06385417477170591],[1.0000000546724108,-.08948418209496575,-1.2914855378640917]],ye=[[.2104542553,.7936177849999999,-.0040720468],[1.9779984951000003,-2.4285922049999997,.4505937099000001],[.025904037099999982,.7827717662,-.8086757660000001]],ge=[[.8190224432164319,.3619062562801221,-.12887378261216414],[.0329836671980271,.9292868468965546,.03614466816999844],[.048177199566046255,.26423952494422764,.6335478258136937]],me=[[1.226879873374156,-.5578149965554814,.2813910501772159],[-.040575762624313734,1.1122868293970596,-.07171106666151703],[-.07637294974672144,-.4214933239627915,1.586924024427242]],be=[[.7976700747153241,.13519395152800417,.03135596341127167],[.28803902352472205,.7118744007923554,8661179538844252e-20],[2739876695467402e-22,-14405226518969991e-22,.825211112593861]],_e=[[1.3459533710138858,-.25561367037652133,-.051116041522131374],[-.544600415668951,1.5081687311475767,.020535163968720935],[-13975622054109725e-22,2717590904589903e-21,1.2118111696814942]],we=[[1.0478573189120088,.022907374491829943,-.050162247377152525],[.029570500050499514,.9904755577034089,-.017061518194840468],[-.00924047197558879,.015052921526981566,.7519708530777581]],Ee=[[.9555366447632887,-.02306009252137888,.06321844147263304],[-.028315378228764922,1.009951351591575,.021026001591792402],[.012308773293784308,-.02050053471777469,1.3301947294775631]],Te=[[3.2408089365140573,-1.5375788839307314,-.4985609572551541],[-.9692732213205414,1.876110235238969,.041560501141251774],[.05567030990267439,-.2040007921971802,1.0571046720577026]];function Oe(t,e,n){let o=(t+16)/116,r=o+e/500,s=o-n/200;function a(c){return c<=.20689655172413793?108/841*(c-16/116):c*c*c}return r=a(r)*Gt,o=a(o)*jt,s=a(s)*Xt,[r,o,s]}function Re(t,e,n){function o(c){return c<=.008856451679035631?841/108*c+16/116:Math.pow(c,1/3)}t=o(t/Gt),e=o(e/jt),n=o(n/Xt);const r=116*e-16,s=500*(t-e),a=200*(e-n);return[r,s,a]}function Nt(t,e,n){const r=T(he,[t,e,n]);return r[0]=r[0]*r[0]*r[0],r[1]=r[1]*r[1]*r[1],r[2]=r[2]*r[2]*r[2],T(me,r)}function $t(t,e,n){const r=T(ge,[t,e,n]);r[0]=Math.pow(r[0],1/3),r[1]=Math.pow(r[1],1/3),r[2]=Math.pow(r[2],1/3);const s=T(ye,r);return[s[0],s[1],s[2]]}function Vt(t,e,n){return n===void 0?[t,0,0]:[t,e*Math.cos(Mt(n)),e*Math.sin(Mt(n))]}function Ut(t,e,n){return[t,Math.sqrt(e*e+n*n),pe(Math.atan2(n,e))]}function Se(t,e,n){const[o,r,s]=F(I.sRGB,t,e,n),a=[o,r,s];return T(D.displayP3,a)}function Ae(t,e,n){const o=[t,e,n],r=T(D.displayP3_INVERSE,o);return F(I.sRGB_INVERSE,r[0],r[1],r[2])}function Ce(t,e,n){const[o,r,s]=F(I.proPhotoRGB,t,e,n);return T(be,[o,r,s])}function Pe(t,e,n){const r=T(_e,[t,e,n]);return F(I.proPhotoRGB_INVERSE,r[0],r[1],r[2])}function Me(t,e,n){const[o,r,s]=F(I.k2Dot2,t,e,n),a=[o,r,s];return T(D.adobeRGB,a)}function ze(t,e,n){const o=[t,e,n],r=T(D.adobeRGB_INVERSE,o);return F(I.k2Dot2_INVERSE,r[0],r[1],r[2])}function Le(t,e,n){const[o,r,s]=F(I.rec2020,t,e,n),a=[o,r,s];return T(D.rec2020,a)}function Be(t,e,n){const o=[t,e,n],r=T(D.rec2020_INVERSE,o);return F(I.rec2020_INVERSE,r[0],r[1],r[2])}function Ht(t,e,n){return T(Ee,[t,e,n])}function Wt(t,e,n){return T(we,[t,e,n])}function Ie(t,e,n){return T(Te,[t,e,n])}function De(t,e,n){const o=[t,e,n];return T(D.sRGB_INVERSE,o)}function Fe(t,e,n){const o=[t,e,n];return T(D.sRGB,o)}function xe(t,e,n){const[o,r,s]=F(I.sRGB,t,e,n),a=[o,r,s];return T(D.sRGB,a)}function ve(t,e,n){const o=[t,e,n],r=T(D.sRGB_INVERSE,o);return F(I.sRGB_INVERSE,r[0],r[1],r[2])}function Ge(t,e,n){const[o,r,s]=Vt(t,e,n),[a,c,i]=Nt(o,r,s);return Wt(a,c,i)}function je(t,e,n){const[o,r,s]=Ht(t,e,n),[a,c,i]=$t(o,r,s);return Ut(a,c,i)}var Xe=h&&h.__createBinding||(Object.create?function(t,e,n,o){o===void 0&&(o=n);var r=Object.getOwnPropertyDescriptor(e,n);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,o,r)}:function(t,e,n,o){o===void 0&&(o=n),t[o]=e[n]}),Ne=h&&h.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),$e=h&&h.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&Xe(e,t,n);return Ne(e,t),e};Object.defineProperty(ut,"__esModule",{value:!0});ut.parse=Ye;ut.parseHex=kt;ut.parseColor=Yt;const nt=ct,m=$e(g),Ve=35,pt=37,Ue=103,dt=110,He=100,We=101,ke=(()=>{const t="(\\w+)",e="[\\s,\\/]",n="([^\\s,\\/]+)",o=`(?:${e}+${n})`;return new RegExp(`${t}\\(
      ${e}*
      ${n}
      ${o}
      ${o}
      ${o}?
      ${o}?
      ${e}*
    \\)`.replace(/\s/g,""))})();function Ye(t){return t.charCodeAt(0)===Ve?kt(t):Yt(t)}function kt(t){let e=0,n=0,o=0,r=255;switch(t.length){case 4:{e=(E(t.charCodeAt(1))<<4)+E(t.charCodeAt(1)),n=(E(t.charCodeAt(2))<<4)+E(t.charCodeAt(2)),o=(E(t.charCodeAt(3))<<4)+E(t.charCodeAt(3));break}case 7:{e=(E(t.charCodeAt(1))<<4)+E(t.charCodeAt(2)),n=(E(t.charCodeAt(3))<<4)+E(t.charCodeAt(4)),o=(E(t.charCodeAt(5))<<4)+E(t.charCodeAt(6));break}case 9:{e=(E(t.charCodeAt(1))<<4)+E(t.charCodeAt(2)),n=(E(t.charCodeAt(3))<<4)+E(t.charCodeAt(4)),o=(E(t.charCodeAt(5))<<4)+E(t.charCodeAt(6)),r=(E(t.charCodeAt(7))<<4)+E(t.charCodeAt(8));break}}return(0,nt.newColor)(e,n,o,r)}function E(t){return(t&15)+9*(t>>6)}function Yt(t){const e=ke.exec(t);if(e===null)throw new Error(`Color.parse(): invalid CSS color: "${t}"`);const n=e[1],o=e[2],r=e[3],s=e[4],a=e[5],c=e[6];switch(n){case"rgb":case"rgba":{const i=ht(o),d=ht(r),u=ht(s),l=a?$(a):255;return(0,nt.newColor)(i,d,u,l)}case"hsl":case"hsla":{const i=yt(o),d=ft(r),u=ft(s),l=a?$(a):255;let p,b,O;if(d===0)p=b=O=Math.round(u*255);else{const R=u<.5?u*(1+d):u+d-u*d,S=2*u-R;p=Math.round(et(S,R,i+1/3)*255),b=Math.round(et(S,R,i)*255),O=Math.round(et(S,R,i-1/3)*255)}return(0,nt.newColor)(p,b,O,l)}case"hwb":{const i=yt(o),d=ft(r),u=ft(s),l=a?$(a):255,p=1,b=.5,O=b+p-b*p,R=2*b-O;let S=Math.round(et(R,O,i+1/3)*255),x=Math.round(et(R,O,i)*255),Y=Math.round(et(R,O,i-1/3)*255);return S=gt(S,d,u),x=gt(x,d,u),Y=gt(Y,d,u),(0,nt.newColor)(S,x,Y,l)}case"lab":{const i=V(o,100),d=V(r,125),u=V(s,125),l=a?$(a):255;return P(l,m.xyzd50ToSrgb(...m.labToXyzd50(i,d,u)))}case"lch":{const i=V(o,100),d=V(r,150),u=yt(s)*360,l=a?$(a):255;return P(l,m.xyzd50ToSrgb(...m.labToXyzd50(...m.lchToLab(i,d,u))))}case"oklab":{const i=V(o,1),d=V(r,.4),u=V(s,.4),l=a?$(a):255;return P(l,m.xyzd50ToSrgb(...m.xyzd65ToD50(...m.oklabToXyzd65(i,d,u))))}case"oklch":{const i=tt(o),d=tt(r),u=tt(s),l=a?$(a):255;return P(l,m.xyzd50ToSrgb(...m.oklchToXyzd50(i,d,u)))}case"color":{const i=o,d=tt(r),u=tt(s),l=tt(a),p=c?$(c):255;switch(i){case"srgb":return P(p,[d,u,l]);case"srgb-linear":return P(p,m.xyzd50ToSrgb(...m.srgbLinearToXyzd50(d,u,l)));case"display-p3":return P(p,m.xyzd50ToSrgb(...m.displayP3ToXyzd50(d,u,l)));case"a98-rgb":return P(p,m.xyzd50ToSrgb(...m.adobeRGBToXyzd50(d,u,l)));case"prophoto-rgb":return P(p,m.xyzd50ToSrgb(...m.proPhotoToXyzd50(d,u,l)));case"rec2020":return P(p,m.xyzd50ToSrgb(...m.rec2020ToXyzd50(d,u,l)));case"xyz":case"xyz-d65":return P(p,m.xyzd50ToSrgb(...m.xyzd65ToD50(d,u,l)));case"xyz-d50":return P(p,m.xyzd50ToSrgb(d,u,l))}}}throw new Error(`Color.parse(): invalid CSS color: "${t}"`)}function ht(t){return t.charCodeAt(t.length-1)===pt?Math.round(parseFloat(t)/100*255):Math.round(parseFloat(t))}function $(t){return Math.round(Ze(t)*255)}function Ze(t){return t.charCodeAt(0)===dt?0:t.charCodeAt(t.length-1)===pt?parseFloat(t)/100:parseFloat(t)}function yt(t){let e=1;switch(t.charCodeAt(t.length-1)){case We:return 0;case He:{t.charCodeAt(Math.max(0,t.length-4))===Ue?e=400:e=2*Math.PI;break}case dt:{e=1;break}default:e=360}return parseFloat(t)/e}function ft(t){return t.charCodeAt(0)===dt?0:parseFloat(t)/100}function tt(t){return t.charCodeAt(0)===dt?0:t.charCodeAt(t.length-1)===pt?parseFloat(t)/100:parseFloat(t)}function V(t,e){return t.charCodeAt(0)===dt?0:t.charCodeAt(t.length-1)===pt?parseFloat(t)/100*e:parseFloat(t)}function et(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function gt(t,e,n){let o=t/255;return o*=1-e-n,o+=e,Math.round(o*255)}function mt(t){return Math.max(0,Math.min(255,t))}function P(t,e){const n=mt(Math.round(e[0]*255)),o=mt(Math.round(e[1]*255)),r=mt(Math.round(e[2]*255));return(0,nt.newColor)(n,o,r,t)}var M={},qe=h&&h.__createBinding||(Object.create?function(t,e,n,o){o===void 0&&(o=n);var r=Object.getOwnPropertyDescriptor(e,n);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,o,r)}:function(t,e,n,o){o===void 0&&(o=n),t[o]=e[n]}),Je=h&&h.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Ke=h&&h.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&qe(e,t,n);return Je(e,t),e};Object.defineProperty(M,"__esModule",{value:!0});M.format=void 0;M.formatHEXA=Zt;M.formatHEX=tn;M.formatRGBA=en;M.toRGBA=nn;M.formatHSLA=rn;M.toHSLA=on;M.formatHWBA=sn;M.toHWBA=an;const Qe=Ke(ct),{getRed:H,getGreen:W,getBlue:k,getAlpha:K}=Qe,w=[0,0,0],J=Array.from({length:256}).map((t,e)=>e.toString(16).padStart(2,"0"));M.format=Zt;function Zt(t){return"#"+J[H(t)]+J[W(t)]+J[k(t)]+J[K(t)]}function tn(t){return"#"+J[H(t)]+J[W(t)]+J[k(t)]}function en(t){return`rgba(${H(t)} ${W(t)} ${k(t)} / ${K(t)/255})`}function nn(t){return{r:H(t),g:W(t),b:k(t),a:K(t)}}function rn(t){qt(H(t),W(t),k(t));const e=w[0],n=w[1],o=w[2],r=K(t)/255;return`hsla(${e} ${n}% ${o}% / ${r})`}function on(t){qt(H(t),W(t),k(t));const e=w[0],n=w[1],o=w[2],r=K(t)/255;return{h:e,s:n,l:o,a:r}}function sn(t){Jt(H(t),W(t),k(t));const e=w[0],n=w[1],o=w[2],r=K(t)/255;return`hsla(${e} ${n}% ${o}% / ${r})`}function an(t){Jt(H(t),W(t),k(t));const e=w[0],n=w[1],o=w[2],r=K(t)/255;return{h:e,w:n,b:o,a:r}}function qt(t,e,n){t/=255,e/=255,n/=255;const o=Math.max(t,e,n),r=o-Math.min(t,e,n),s=r?o===t?(e-n)/r:o===e?2+(n-t)/r:4+(t-e)/r:0;w[0]=60*s<0?60*s+360:60*s,w[1]=100*(r?o<=.5?r/(2*o-r):r/(2-(2*o-r)):0),w[2]=100*(2*o-r)/2}function Jt(t,e,n){t/=255,e/=255,n/=255;const o=Math.min(t,e,n),r=Math.max(t,e,n),s=1-r;if(r===o){w[0]=0,w[1]=o,w[2]=s;return}let a=t===o?e-n:e===o?n-t:t-e,c=t===o?3:e===o?5:1;w[0]=(c-a/(r-o))/6,w[1]=o,w[2]=s}var Q={},cn=h&&h.__createBinding||(Object.create?function(t,e,n,o){o===void 0&&(o=n);var r=Object.getOwnPropertyDescriptor(e,n);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,o,r)}:function(t,e,n,o){o===void 0&&(o=n),t[o]=e[n]}),un=h&&h.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),dn=h&&h.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&cn(e,t,n);return un(e,t),e};Object.defineProperty(Q,"__esModule",{value:!0});Q.alpha=pn;Q.darken=hn;Q.lighten=yn;Q.blend=gn;Q.getLuminance=mn;const ln=dn(ct),{getRed:ot,getGreen:st,getBlue:at,getAlpha:Kt,setAlpha:fn,newColor:Ot}=ln;function pn(t,e){return fn(t,Math.round(e*255))}function hn(t,e){const n=ot(t),o=st(t),r=at(t),s=Kt(t),a=1-e;return Ot(n*a,o*a,r*a,s)}function yn(t,e){const n=ot(t),o=st(t),r=at(t),s=Kt(t);return Ot(n+(255-n)*e,o+(255-o)*e,r+(255-r)*e,s)}function gn(t,e,n,o=1){const r=(i,d)=>Math.round((i**(1/o)*(1-n)+d**(1/o)*n)**o),s=r(ot(t),ot(e)),a=r(st(t),st(e)),c=r(at(t),at(e));return Ot(s,a,c,255)}function mn(t){const e=ot(t)/255,n=st(t)/255,o=at(t)/255,r=i=>i<=.03928?i/12.92:((i+.055)/1.055)**2.4,s=r(e),a=r(n),c=r(o);return Math.round((.2126*s+.7152*a+.0722*c)*1e3)/1e3}(function(t){var e=h&&h.__createBinding||(Object.create?function(o,r,s,a){a===void 0&&(a=s);var c=Object.getOwnPropertyDescriptor(r,s);(!c||("get"in c?!r.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return r[s]}}),Object.defineProperty(o,a,c)}:function(o,r,s,a){a===void 0&&(a=s),o[a]=r[s]}),n=h&&h.__exportStar||function(o,r){for(var s in o)s!=="default"&&!Object.prototype.hasOwnProperty.call(r,s)&&e(r,o,s)};Object.defineProperty(t,"__esModule",{value:!0}),n(ct,t),n(ut,t),n(M,t),n(Q,t)})(Tt);function U(t,e=document.documentElement){var r;if((r=window.CSS)!=null&&r.number)return CSSNumericValue.parse(t).to("px").value;const n=document.createElement("div");n.style.all="initial",n.style.position="absolute",n.style.width=t,e.appendChild(n);const o=n.getBoundingClientRect().width;return e.removeChild(n),o}const j=4,bn=8;function zt(t){const{borderWidth:e,borderRadius:n,backgroundColor:o,paddingLeft:r,paddingRight:s,paddingTop:a,paddingBottom:c}=getComputedStyle(t),i=t.getBoundingClientRect(),d=Tt.getAlpha(Tt.parse(o))===0,u=U(e)>0,l=U(n),p=l?l+j:bn;return d&&!u?{x:i.x+U(r)-j,y:i.y+U(a)-j,width:i.width-U(r)-U(s)+j*2,height:i.height-U(a)-U(c)+j*2,borderRadius:p}:{x:i.x-j,y:i.y-j,width:i.width+j*2,height:i.height+j*2,borderRadius:p}}const _n=t=>{var n,o,r;const e=(r=(o=(n=rt())==null?void 0:n.contentDocument)==null?void 0:o.defaultView)==null?void 0:r.HTMLElement;return t instanceof HTMLElement||!!e&&t instanceof e},wn=t=>{const{sourceName:e,sourcePos:n}=t.dataset;if(!e||!n)return null;const[o,r]=n.split("-"),[s,a]=o.split(":"),[c,i]=r.split(":");return{id:`${e}:${s}:${a}`,name:e,element:t,location:{start:{line:Number(s),col:Number(a)},end:{line:Number(c),col:Number(i)}}}};function Lt(t){const e=t.composedPath();for(const n of e){if(!_n(n))continue;const o=wn(n);if(o)return o}return null}class En{constructor(){_(this,"window");_(this,"selectedComponent",null);_(this,"hoveredComponent",null);_(this,"frame",null);_(this,"getBoundingBoxes",()=>{let e=null,n=[];if(this.hoveredComponent){const{element:o}=this.hoveredComponent;e={component:{id:this.hoveredComponent.id,name:this.hoveredComponent.name,location:this.hoveredComponent.location},rect:zt(o)}}if(this.selectedComponent){const{element:o}=this.selectedComponent;n=[{component:{id:this.selectedComponent.id,name:this.selectedComponent.name,location:this.selectedComponent.location},rect:zt(o)}]}return{hovered:e,selected:n}});_(this,"measure",()=>{this.frame=requestAnimationFrame(()=>{var e,n;(n=(e=X()).drawBoundingBoxes)==null||n.call(e,this.getBoundingBoxes())})});_(this,"handleMouseOver",e=>{const n=Lt(e);this.hoveredComponent=n,this.measure()});_(this,"handlePointerDown",e=>{e.preventDefault(),e.stopPropagation()});_(this,"handleClick",e=>{e.stopPropagation(),e.preventDefault();const n=Lt(e);this.selectedComponent=n,this.measure()});_(this,"destroy",()=>{this.removeMouseListeners(),this.window.removeEventListener("scroll",this.measure,{capture:!0}),this.window.removeEventListener("resize",this.measure,{capture:!0}),this.frame!=null&&cancelAnimationFrame(this.frame)});_(this,"enable",()=>{this.removeMouseListeners(),this.window.addEventListener("mouseover",this.handleMouseOver,{passive:!0,capture:!0}),this.window.addEventListener("pointerdown",this.handlePointerDown,{capture:!0}),this.window.addEventListener("click",this.handleClick,{capture:!0})});_(this,"disable",()=>{this.removeMouseListeners()});_(this,"removeMouseListeners",()=>{this.window.removeEventListener("mouseover",this.handleMouseOver,{capture:!0}),this.window.removeEventListener("pointerdown",this.handlePointerDown,{capture:!0}),this.window.removeEventListener("click",this.handleClick,{capture:!0})});var e;this.window=ie((e=rt())==null?void 0:e.contentWindow),this.window.addEventListener("scroll",this.measure,{capture:!0}),this.window.addEventListener("resize",this.measure,{capture:!0})}}const Tn=(t,...e)=>{};class Z{constructor(){_(this,"pendingTimers",new Map)}log(e,...n){Tn(e,...n)}error(e,n){console.error("[sandbox]",e,n),X().sendInstrument({type:"error",message:e,error:n})}environmentError(e){if(console.error("[sandbox]",e),e instanceof Error){const{name:o,message:r,stack:s}=e;X().notifyEnvironmentError({name:o,message:r,stack:s});return}const{stack:n}=new Error;try{X().notifyEnvironmentError({name:"Unknown environment error",message:JSON.stringify(e),stack:n})}catch{X().notifyEnvironmentError({name:"Unknown environment error",message:"Failed to stringify error",stack:n})}}count(e,n,o){X().sendInstrument({type:"count",label:e,tags:o,count:n})}time(e){this.pendingTimers.has(e),this.pendingTimers.set(e,performance.now())}timeEnd(e){if(!this.pendingTimers.has(e))return;const n=performance.now(),o=n-(this.pendingTimers.get(e)??n);this.pendingTimers.delete(e),X().sendInstrument({type:"hist",label:e,value:o})}}function On(t){const n=Rt(t,new WeakMap);try{return structuredClone(n)}catch{}return n}function Rt(t,e){if(t===null||typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="bigint")return t;if(typeof t=="symbol"||typeof t=="function"||typeof t>"u")return String(t);if(e.has(t))return e.get(t);try{return structuredClone(t)}catch{}const n=Object.prototype.toString.call(t);if(n==="[object Date]")return new Date(t.getTime());if(n==="[object RegExp]")return Rn(t);if(n==="[object ArrayBuffer]")return t.slice(0);if(n==="[object DataView]"){const r=t,s=Rt(r.buffer,e);try{return new DataView(s,r.byteOffset,r.byteLength)}catch{return String(t)}}if(ArrayBuffer.isView(t)&&!(t instanceof DataView))try{const r=t.constructor;if(typeof t.slice=="function")return t.slice();const s=new r(t.length);return s.set(t),s}catch{return String(t)}if(n==="[object Map]"){const r=new Map;e.set(t,r);for(const[s,a]of t)r.set(q(s,e),q(a,e));return r}if(n==="[object Set]"){const r=new Set;e.set(t,r);for(const s of t)r.add(q(s,e));return r}if(typeof Blob<"u"&&t instanceof Blob)try{return typeof File<"u"&&t instanceof File?new File([t],t.name,{type:t.type,lastModified:t.lastModified}):new Blob([t],{type:t.type})}catch{return String(t)}if(typeof URL<"u"&&t instanceof URL)try{return new URL(t.toString())}catch{return String(t)}if(typeof URLSearchParams<"u"&&t instanceof URLSearchParams)try{return new URLSearchParams(t.toString())}catch{return String(t)}if(t instanceof Error){const r=t;let s;try{const a=r.constructor;s=typeof a=="function"?new a(r.message):new Error(r.message)}catch{s=new Error(r.message)}if(s.name=r.name,typeof r.stack=="string"&&(s.stack=r.stack),"cause"in r)try{s.cause=q(r.cause,e)}catch{s.cause=String(r.cause)}for(const a of Object.keys(r))try{s[a]=q(r[a],e)}catch{s[a]=String(r[a])}return s}if(typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer||typeof WeakMap<"u"&&t instanceof WeakMap||typeof WeakSet<"u"&&t instanceof WeakSet)return String(t);if(Array.isArray(t)){const r=new Array(t.length);e.set(t,r);for(let s=0;s<t.length;s++)s in t&&(r[s]=q(t[s],e));return r}const o={};e.set(t,o);for(const r of Object.keys(t)){let s;try{s=t[r]}catch(a){s=String(a)}o[r]=q(s,e)}return o}function q(t,e){try{return structuredClone(t)}catch{}return Rt(t,e)}function Rn(t){const e=new RegExp(t.source,t.flags);return e.lastIndex=t.lastIndex,e}const Bt="ABORT",It="CALL",Dt="REJECT",bt="RESOLVE";function B(t,e){const n=s=>{const a=s.data;if(Array.isArray(a)&&a[0]===It){s.stopImmediatePropagation();const[c]=s.ports;if(!c)throw new Error("RPCCallMessage must contains a port.");e?async function(){const i=new AbortController;try{c.onmessage=({data:d})=>Array.isArray(d)&&d[0]===Bt&&i.abort(),c.postMessage([bt,await e.call({signal:i.signal},...a.slice(1))])}catch(d){if(d instanceof Error&&d.name==="DataCloneError")try{c.postMessage([bt,await e.call({signal:i.signal},...On(a.slice(1)))]);return}catch{}c.postMessage([Dt,d])}finally{c.close()}}():(c.postMessage([Dt,new Error("No function was registered on this RPC. This is probably calling a client which do not implement the function.")]),c.close())}};t.addEventListener("message",n),t.start();const o=s=>(...a)=>new Promise((c,i)=>{var l;const{port1:d,port2:u}=new MessageChannel;d.onmessage=p=>{const b=p.data;b[0]===bt?c(b[1]):i(b[1]),d.close()},(l=s==null?void 0:s.signal)==null||l.addEventListener("abort",()=>{d.postMessage([Bt]),d.close(),i(new Error("Aborted."))}),t.postMessage([It,...a],[u,...s.transfer||[]])}),r=o({});return r.withOptions=o,r}const Ft="GENERATOR_GENERATE";function xt(t,e){const n=s=>{const a=s.data;if(Array.isArray(a)&&a[0]===Ft){if(s.stopImmediatePropagation(),!e)throw new Error("No function was registered on this RPC. This is probably calling a client which do not implement the function.");const[c,i,...d]=a,u=e(...d);B(i.next,u.next.bind(u)),B(i.return,l=>{var p;return((p=u.return)==null?void 0:p.call(u,l))||{done:!0}}),B(i.throw,l=>{var p;return((p=u.throw)==null?void 0:p.call(u,l))||Promise.reject(l)}),B(i.asyncDispose,async()=>{var b,O;const l=Symbol.asyncDispose||Symbol.for("Symbol.asyncDispose"),p=Symbol.dispose||Symbol.for("Symbol.dispose");l in u?await((b=u[l])==null?void 0:b.call(u)):p in u&&((O=u[p])==null||O.call(u))})}};t.addEventListener("message",n),t.start();const o=s=>{let a;return(...c)=>{var At;const{port1:i,port2:d}=new MessageChannel,{port1:u,port2:l}=new MessageChannel,{port1:p,port2:b}=new MessageChannel,{port1:O,port2:R}=new MessageChannel,S={signal:s.signal},x=()=>{i.close(),d.close(),u.close(),l.close(),p.close(),b.close(),O.close(),R.close()},Y=B(i).withOptions(S),f=B(u).withOptions(S),y=B(p).withOptions(S),A=B(O).withOptions(S);let C=!1;const z=async v=>{if(a==null||a(),C)return{done:!0};const Ct=await v();return Ct.done&&(C=!0,x()),Ct},Qt=async v=>{a==null||a(),await v(),C=!0,x(),a=()=>{throw new Error("This generator has been disposed.")}},St={next:v=>z(()=>f(v)),return:v=>z(()=>y(v)),throw:v=>z(()=>A(v)),[Symbol.asyncDispose||Symbol.for("Symbol.asyncDispose")]:()=>Qt(()=>Y()),[Symbol.asyncIterator]:()=>St};return t.postMessage([Ft,{asyncDispose:d,next:l,return:b,throw:R},...c],[...s.transfer||[],d,l,b,R]),(At=s.signal)==null||At.addEventListener("abort",()=>{a=()=>{throw new Error("This generator has been aborted.")},x()},{once:!0}),St}},r=o({});return r.withOptions=o,r}const lt=new URLSearchParams(window.location.search);lt.get("isStorybook");const Ln=lt.get("sessionId")??"",_t=lt.get("app")??"",Bn=lt.get("locale")??"";lt.get("unsafeSkipTargetOriginCheck");const Sn=()=>_t==="chatgpt"?"https://chatgpt.com":_t==="feather"?"https://feather.openai.com":_t==="skybridge"?"https://skybridge.oaistatic.com":"*",An=async(t,e=[])=>{if("serviceWorker"in navigator){const a=await navigator.serviceWorker.getRegistration();if(a)return await a.unregister(),window.location.reload(),null}const n=Object.fromEntries(Object.entries(t).map(([a,c])=>{var u;const{port1:i,port2:d}=new MessageChannel;return c&&(((u=c==null?void 0:c.constructor)==null?void 0:u.name)==="AsyncGeneratorFunction"?xt(i,c):B(i,c)),[a,d]})),o=new MessageChannel;window.parent.postMessage({type:"init",ports:n,replyPort:o.port2},Sn(),[...Object.values(n),o.port2]);const r=await new Promise(a=>{o.port1.onmessage=c=>a(c.data),o.port1.start()}),s=new Set(e);return Object.fromEntries(Object.entries(r).map(([a,c])=>[a,s.has(a)?xt(c):B(c)]))};let L=null;An({async*runUserCode(t){const e=new Z;try{const{runUserCode:n}=await G(async()=>{const{runUserCode:o}=await import("./run-user-code-DoUMXZup.js");return{runUserCode:o}},__vite__mapDeps([0,1,2,3]));yield*n(e,t)}catch(n){e.environmentError(n)}},async buildUserCode(t){const e=new Z;try{const{buildUserCode:n}=await G(async()=>{const{buildUserCode:o}=await import("./build-user-code-CF8dW8FY.js");return{buildUserCode:o}},__vite__mapDeps([4,5]));return await n(e,t)}catch(n){e.environmentError(n)}return null},async prepareEnvironment(t){const e=new Z;try{const{prepareEnvironment:n}=await G(async()=>{const{prepareEnvironment:o}=await import("./prepare-environment-wJ00y6L9.js");return{prepareEnvironment:o}},[]);await n(e,t)}catch(n){e.environmentError(n)}},async*runWidgetCode(t){const e=new Z;try{const{runWidgetCode:n}=await G(async()=>{const{runWidgetCode:o}=await import("./run-widget-code-C1wkUgZl.js");return{runWidgetCode:o}},__vite__mapDeps([6,3,7,1,8,2,9]));yield*n(e,t)}catch(n){e.environmentError(n)}},async validate(t,e){const n=new Z;try{const{validateReact:o}=await G(async()=>{const{validateReact:r}=await import("./validate-react-W6PDThY6.js");return{validateReact:r}},__vite__mapDeps([10,1,7,8,2,9,5,11]));return await o(n,t,e),!0}catch(o){const{parseAndLogTranspileError:r}=await G(async()=>{const{parseAndLogTranspileError:s}=await import("./parse-transpile-error-BOpPOwyE.js");return{parseAndLogTranspileError:s}},__vite__mapDeps([12,11,8]));return r(n,o)??!1}},stop(){L==null||L.destroy(),L=null,oe()},setEditMode:t=>{try{L??(L=new En)}catch{return}t?L.enable():(L==null||L.destroy(),L=null)},async screenshot(){var a;const t=rt();if(!t)return null;const e=(a=t.contentDocument)==null?void 0:a.documentElement;if(!e)return null;const n=e.scrollLeft||0,o=e.scrollTop||0,{domToDataUrl:r}=await G(async()=>{const{domToDataUrl:c}=await import("./index-CSSI_kxh.js");return{domToDataUrl:c}},[]);return{imageBase64:await r(e,{backgroundColor:"transparent"}),scrollX:n,scrollY:o}},async setAdditionalGlobals({additionalGlobals:t}){const e=new Z;try{const{setAdditionalGlobals:n}=await G(async()=>{const{setAdditionalGlobals:o}=await import("./set-additional-globals-DW3EOb1N.js");return{setAdditionalGlobals:o}},__vite__mapDeps([9,1]));n({additionalGlobals:t,sandboxLogger:e})}catch(n){e.environmentError(n)}},async setWidgetProps({widgetId:t,widgetState:e,toolInput:n,toolOutput:o}){const{setAdditionalGlobals:r}=await G(async()=>{const{setAdditionalGlobals:a}=await import("./set-additional-globals-DW3EOb1N.js");return{setAdditionalGlobals:a}},__vite__mapDeps([9,1])),s=new Z;try{r({additionalGlobals:{widget:{state:e,props:o,setState:a=>{var c,i;return(i=(c=X())==null?void 0:c.updateWidgetState)==null?void 0:i.call(c,t,a)}},toolInput:n,toolOutput:o,widgetState:e,setWidgetState:a=>{var c,i;return(i=(c=X())==null?void 0:c.updateWidgetState)==null?void 0:i.call(c,t,a)}},sandboxLogger:s})}catch(a){s.environmentError(a)}},navigate({delta:t}){var e,n;(n=(e=rt())==null?void 0:e.contentWindow)==null||n.history.go(t)}},["streamCompletion"]).then(t=>{t&&ce(t)});export{Bn as L,Ln as S,G as _,rt as a,zn as b,h as c,X as g,Pn as r,Mn as u};
